# CosmoScope

CosmoScope is an open-source research artifact for fine-grained benchmarking and performance analysis of modular BFT blockchain systems. It provides instrumentation, workload generation, and analysis tools designed to evaluate transaction processing, mempool behavior, and consensus dynamics in systems such as Cosmos SDK chains using CometBFT.

## Repository scope

This repository is intended as a research prototype and benchmarking artifact.

It includes:
- Instrumentation code for collecting fine-grained consensus and mempool metrics
- Workload generation utilities for synthetic and trace-driven experiments
- Scripts for log parsing, metric extraction, and offline analysis
- Plotting utilities for reproducing figures from collected metrics
- Example configuration files used in experimental runs

Some components, automation, and documentation are still under active development. The repository is not intended to be a turnkey production benchmarking system.

## System overview

CosmoScope is structured as a modular benchmarking pipeline:
- A workload generator constructs and submits transactions according to synthetic distributions or scaled mainnet traces
- Instrumented CometBFT nodes emit detailed timing information for consensus phases and mempool admission
- Log processing scripts reconstruct block-level and consensus-level metrics
- Offline analysis and plotting tools generate figures for performance evaluation

The framework emphasizes reproducibility, controlled experimentation, and diagnostic visibility into BFT consensus behavior.

## Requirements

Experiments were conducted on Linux systems. The following software is required to run the core tooling:

- Python 3.8 or newer
- Go toolchain compatible with the targeted Cosmos SDK and CometBFT versions
- A local or distributed Cosmos SDK test network

Python dependencies for analysis and plotting:

pip install pandas matplotlib seaborn SciencePlots

## Plot generation

CosmoScope includes a plotting script to generate figures from collected benchmarking metrics.

Script:
- cosmo_plotter.py

Input:
- benchmark_metrics.csv (generated by the metrics extraction pipeline)

Output:
- Plots saved to ./plots as PDF and PNG files

### Install SciencePlots styles

The plotting script uses the SciencePlots Matplotlib style.

git clone https://github.com/garrettj403/SciencePlots.git
mkdir -p ~/.config/matplotlib/stylelib/
cp SciencePlots/scienceplots/styles/*.mplstyle ~/.config/matplotlib/stylelib/

### Optional font configuration

If the Figtree font is installed at:

~/.local/share/fonts/Figtree.ttf

it will be used automatically. Otherwise, the default Matplotlib font is used.

### Run the plotter

python3 cosmo_plotter.py benchmark_metrics.csv

All plots will be written to the plots directory.

### Optional LaTeX support

LaTeX is not required by default. If LaTeX rendering is enabled manually, the following package may be needed:

sudo apt install texlive-latex-base

## Reproducibility notes

The scripts and configurations in this repository reflect the experimental setup described in the paper. Exact reproduction of reported results may require matching:
- Cosmos SDK and CometBFT versions
- Consensus timeout and mempool configuration
- Hardware resources and deployment topology

Example configurations are provided to support comparable experimental setups.

## Limitations

This artifact focuses on benchmarking and diagnostic analysis under controlled conditions. It does not model:
- Byzantine or adversarial behavior
- Validator churn or dynamic stake changes
- Wide-area network latency or heterogeneous hardware environments

Results should be interpreted accordingly.

## License

This project is released under an open-source license. See the LICENSE file for details.

## Contact

For questions, issues, or suggestions related to CosmoScope, please open an issue in the repository.
